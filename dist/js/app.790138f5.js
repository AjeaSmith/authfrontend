(function(e){function t(t){for(var a,s,i=t[0],u=t[1],l=t[2],d=0,f=[];d<i.length;d++)s=i[d],o[s]&&f.push(o[s][0]),o[s]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(t);while(f.length)f.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,i=1;i<r.length;i++){var u=r[i];0!==o[u]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},o={app:0},n=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("64a9"),o=r.n(a);o.a},1:function(e,t){},2:function(e,t){},3:function(e,t){},"3f94":function(e,t,r){},4:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),o=r("9f7b"),n=r.n(o);r("ab8b"),r("2dd8");a["default"].use(n.a);var s=r("d847"),i=r.n(s),u=r("795b"),l=r.n(u),c=r("bc3a"),d=r.n(c),f={},p=d.a.create(f);p.interceptors.request.use(function(e){return e},function(e){return l.a.reject(e)}),p.interceptors.response.use(function(e){return e},function(e){return l.a.reject(e)}),Plugin.install=function(e,t){e.axios=p,window.axios=p,i()(e.prototype,{axios:{get:function(){return p}},$axios:{get:function(){return p}}})},a["default"].use(Plugin);Plugin;var m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("b-navbar",{staticClass:"navbar",attrs:{type:"dark",variant:"dark"}},[r("b-navbar-brand",[e._v("Auth with JWT")]),r("div",{staticClass:"right"},[r("b-nav-item",{attrs:{href:"#",to:"/login"}},[e._v("Login")]),r("b-nav-item",{attrs:{href:"#",to:"/"}},[e._v("Register")]),e.isLoggedin?r("b-nav-item",{attrs:{href:"#"},on:{click:function(t){return e.logout()}}},[e._v("Login Out")]):e._e()],1)],1)],1),r("router-view")],1)},b=[],h={name:"App",data:function(){return{isLoggedin:!1}},methods:{logout:function(){localStorage.removeItem("token"),this.$router.push("/login")}}},g=h,v=(r("034f"),r("2877")),w=Object(v["a"])(g,m,b,!1,null,null,null),x=w.exports,_=r("8c4f"),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"mt-3"},[r("section",[e._l(e.user,function(t){return r("h2",{key:t._id},[e._v("Welcome, "+e._s(e.user.user.username))])}),r("b-form",{staticClass:"mt-5 mb-4",on:{submit:function(t){return t.preventDefault(),e.addNote()}}},[r("b-form-group",{attrs:{label:"Add Note:","label-for":"note"}},[r("b-form-input",{attrs:{id:"note",type:"text",required:"",placeholder:"Enter Note"},model:{value:e.note.title,callback:function(t){e.$set(e.note,"title",t)},expression:"note.title"}})],1),r("b-form-group",{attrs:{label:"Add description","label-for":"desc"}},[r("b-form-textarea",{attrs:{id:"desc",placeholder:"Enter Note...",rows:"3","max-rows":"6"},model:{value:e.note.desc,callback:function(t){e.$set(e.note,"desc",t)},expression:"note.desc"}})],1),r("b-form-group",[r("b-button",{attrs:{block:"",type:"submit",variant:"success"}},[e._v("Add Note")])],1)],1),r("b-card-group",[r("b-row",e._l(e.notes,function(t){return r("b-col",{key:t._id,staticClass:"d-flex flex-row mb-3 flex-md-wrap justify-content width",attrs:{sm:"6",md:"6",lg:"4",xl:"3"}},[r("b-card",{staticClass:"width",attrs:{"border-variant":"primary",header:t.title,"header-bg-variant":"primary","header-text-variant":"white",align:"center"}},[r("b-card-text",[e._v(e._s(t.description))])],1)],1)}),1)],1)],2)])},y=[],M="https://vueauthapp.herokuapp.com",$={name:"Home",data:function(){return{user:null,note:{title:"",desc:"",id:null},notes:[]}},created:function(){var e=this;d.a.get("".concat(M,"/api/auth"),{headers:{authorization:"Bearer ".concat(localStorage.token)}}).then(function(t){t.data?(e.user=t.data,e.note.id=t.data.user._id):(localStorage.removeItem("token"),e.$router.push("/login"))}).catch(function(e){console.log("user error:",e)}),this.getNotes()},methods:{addNote:function(){var e=this,t={userID:this.note.id,title:this.note.title,description:this.note.desc};d.a.post("".concat(M,"/api/v1/notes"),t,{headers:{authorization:"Bearer ".concat(localStorage.token)}}).then(function(t){console.log(t.data),e.notes.push(t.data),e.newNote={title:"",desc:""}}).catch(function(e){console.log("err created:",e)})},getNotes:function(){var e=this;d.a.get("".concat(M,"/api/v1/notes"),{headers:{authorization:"Bearer ".concat(localStorage.token)}}).then(function(t){e.notes=t.data})}}},j=$,S=(r("8b71"),Object(v["a"])(j,k,y,!1,null,null,null)),C=S.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"mt-2"},[r("b-row",[r("b-col",[r("div",{staticClass:"form-flex"},[r("h3",{staticClass:"mb-3"},[e._v("Login")]),r("b-form",{staticClass:"border p-3 form-width"},[e.errorMessage?r("b-alert",{attrs:{variant:"danger",show:""}},[e._v(e._s(e.errorMessage))]):e._e(),r("b-form-group",{attrs:{label:"Email"}},[r("b-form-input",{attrs:{type:"email",required:"",placeholder:"Your email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),r("b-form-text",[e._v("ex: example.gmail.com")])],1),r("b-form-group",{attrs:{label:"Password"}},[r("b-form-input",{attrs:{type:"password",required:"",placeholder:"Your password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),r("b-form-group",[r("b-button",{attrs:{block:"",variant:"success"},on:{click:function(t){return e.login()}}},[e._v("Login")])],1)],1)],1)])],1)],1)},P=[],E=(r("6762"),r("2fdb"),r("ac6a"),r("f0b1")),N=r.n(E),q="https://vueauthapp.herokuapp.com",A=N.a.object().keys({email:N.a.string().email().required(),password:N.a.string().trim().regex(/^[a-zA-Z0-9]{10,30}$/)}),L={name:"Login",data:function(){return{errorMessage:"",user:{email:"",password:""}}},methods:{login:function(){var e=this;if(this.errorMessage="",this.validUser()){var t={email:this.user.email,password:this.user.password};d.a.post("".concat(q,"/api/auth/login"),t).then(function(t){t.data&&(localStorage.token=t.data.token,e.$router.push("/homepage"))}).catch(function(t){e.errorMessage="Unable to login"})}},validUser:function(){var e=N.a.validate(this.user,A);if(null===e.error)return!0;e.error.message.includes("email")?this.errorMessage="Must be a valid email":e.error.message.includes("password")&&(this.errorMessage="Password cannot be empty, must be 6-8 characters long")}},watch:{user:{handler:function(){this.errorMessage=""},deep:!0}}},U=L,z=(r("f2a3"),Object(v["a"])(U,O,P,!1,null,"149c40b2",null)),T=z.exports,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"mt-2"},[r("b-row",[r("b-col",[r("div",{staticClass:"form-flex"},[r("h3",{staticClass:"mb-3"},[e._v("Register to Manage Todos")]),r("b-form",{staticClass:"border p-3 form-width"},[e.errorMessage?r("b-alert",{attrs:{variant:"danger",show:""}},[e._v(e._s(e.errorMessage))]):e._e(),r("b-form-group",{attrs:{label:"Name"}},[r("b-form-input",{attrs:{type:"text",required:"",placeholder:"Your name"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),r("b-form-group",{attrs:{label:"Email"}},[r("b-form-input",{attrs:{type:"email",required:"",placeholder:"Your email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),r("b-form-text",[e._v("ex: example.gmail.com")])],1),r("b-form-group",{attrs:{label:"Password"}},[r("b-form-input",{attrs:{type:"password",required:"",placeholder:"Your password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),r("b-form-group",[r("b-button",{attrs:{block:"",variant:"success"},on:{click:function(t){return e.registerUser()}}},[e._v("Register")])],1)],1)],1)])],1)],1)},R=[],B="https://vueauthapp.herokuapp.com",I=N.a.object().keys({username:N.a.string().min(4).max(30).trim().required(),email:N.a.string().email().required(),password:N.a.string().trim().regex(/^[a-zA-Z0-9]{10,30}$/)}),J={name:"Register",data:function(){return{errorMessage:"",user:{username:"",email:"",password:""}}},methods:{registerUser:function(){var e=this;if(this.errorMessage="",this.validate()){var t={username:this.user.username,email:this.user.email,password:this.user.password};d.a.post("".concat(B,"/api/auth/"),t).then(function(t){t.data&&(console.log(t.data),localStorage.token=t.data.token,e.$router.push("/homepage"))}).catch(function(t){e.errorMessage="User already exists"})}},validate:function(){var e=N.a.validate(this.user,I);return null===e.error||(e.error.message.includes("name")&&(this.errorMessage="Name must be longer than 4 characters & Cannot be empty"),e.error.message.includes("password")&&(this.errorMessage="Password cannot be empty, must be 6-8 characters long"),e.error.message.includes("email")&&(this.errorMessage="Email cannot be empty & Must be a valid email"),!1)}},watch:{user:{handler:function(){this.errorMessage=""},deep:!0}}},D=J,W=(r("6eb0"),Object(v["a"])(D,Y,R,!1,null,"47fb74f7",null)),Z=W.exports;a["default"].use(_["a"]);var H=new _["a"]({mode:"history",base:"/",routes:[{path:"/",name:"register",component:Z,beforeEnter:function(e,t,r){localStorage.token?r("/homepage"):r()}},{path:"/login",name:"login",component:T,beforeEnter:function(e,t,r){localStorage.token?r("/homepage"):r()}},{path:"/homepage",name:"homepage",component:C,beforeEnter:function(e,t,r){localStorage.token?r():r("/login")}}]}),F=r("2f62");a["default"].use(F["a"]);var G=new F["a"].Store({state:{},mutations:{},actions:{}});a["default"].config.productionTip=!1,new a["default"]({router:H,store:G,render:function(e){return e(x)}}).$mount("#app")},"64a9":function(e,t,r){},"6eb0":function(e,t,r){"use strict";var a=r("3f94"),o=r.n(a);o.a},"8b71":function(e,t,r){"use strict";var a=r("e3a2"),o=r.n(a);o.a},e3a2:function(e,t,r){},f2a3:function(e,t,r){"use strict";var a=r("f3d8"),o=r.n(a);o.a},f3d8:function(e,t,r){}});
//# sourceMappingURL=app.790138f5.js.map