(function(e){function t(t){for(var a,i,s=t[0],u=t[1],l=t[2],d=0,m=[];d<s.length;d++)i=s[d],n[i]&&m.push(n[i][0]),n[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,s=1;s<r.length;s++){var u=r[s];0!==n[u]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},o=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=u;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("64a9"),n=r.n(a);n.a},"1e73":function(e,t,r){"use strict";var a=r("485f"),n=r.n(a);n.a},"485f":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),n=r("9f7b"),o=r.n(n);r("ab8b"),r("2dd8");a["default"].use(o.a);var i=r("d847"),s=r.n(i),u=r("795b"),l=r.n(u),c=r("bc3a"),d=r.n(c),m={},f=d.a.create(m);f.interceptors.request.use(function(e){return e},function(e){return l.a.reject(e)}),f.interceptors.response.use(function(e){return e},function(e){return l.a.reject(e)}),Plugin.install=function(e,t){e.axios=f,window.axios=f,s()(e.prototype,{axios:{get:function(){return f}},$axios:{get:function(){return f}}})},a["default"].use(Plugin);Plugin;var p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("b-navbar",{staticClass:"navbar",attrs:{type:"dark",variant:"dark"}},[r("b-navbar-brand",[e._v("Auth with JWT")]),r("div",{staticClass:"right"},[e.isLoggedin?e._e():r("b-nav-item",{attrs:{href:"#",to:"/login"}},[e._v("Login")]),e.isLoggedin?e._e():r("b-nav-item",{attrs:{href:"#",to:"/"}},[e._v("Register")]),r("b-nav-item",{attrs:{href:"#"},on:{click:function(t){return e.logout()}}},[e._v("Logout")])],1)],1)],1),r("router-view")],1)},b=[],h=r("2f62"),g={name:"App",data:function(){return{isLoggedin:!1}},methods:{logout:function(){localStorage.removeItem("token"),this.$router.push("/login")}},computed:{isToken:{get:function(){return this.isLoggedin},set:function(e){localStorage.token&&(this.isLoggedin=!0,console.log(this.isLoggedin))}}}},v=g,w=(r("034f"),r("2877")),_=Object(w["a"])(v,p,b,!1,null,null,null),x=_.exports,$=r("8c4f"),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"mt-3"},[r("section",[e._l(e.user,function(t){return r("h2",{key:t._id},[e._v("Welcome, "+e._s(e.user.user.username))])}),r("b-form",{staticClass:"mt-5 mb-4",on:{submit:function(t){return t.preventDefault(),e.addNote()}}},[r("b-form-group",{attrs:{label:"Add Note:","label-for":"note"}},[r("b-form-input",{attrs:{id:"note",type:"text",required:"",placeholder:"Enter Note"},model:{value:e.note.title,callback:function(t){e.$set(e.note,"title",t)},expression:"note.title"}})],1),r("b-form-group",{attrs:{label:"Add description","label-for":"desc"}},[r("b-form-textarea",{attrs:{id:"desc",placeholder:"Enter Note...",rows:"3","max-rows":"6"},model:{value:e.note.desc,callback:function(t){e.$set(e.note,"desc",t)},expression:"note.desc"}})],1),r("b-form-group",[r("b-button",{attrs:{block:"",type:"submit",variant:"success"}},[e._v("Add Note")])],1)],1),r("b-card-group",[r("b-row",e._l(e.notes,function(t){return r("b-col",{key:t._id,staticClass:"d-flex flex-row mb-3 flex-md-wrap justify-content width",attrs:{sm:"6",md:"6",lg:"4",xl:"3"}},[r("b-card",{staticClass:"width",attrs:{"border-variant":"primary",header:t.title,"header-bg-variant":"primary","header-text-variant":"white",align:"center"}},[r("b-card-text",[e._v(e._s(t.description))])],1)],1)}),1)],1)],2)])},y=[],L="https://vueauthapp.herokuapp.com",q={name:"Home",data:function(){return{user:null,note:{title:"",desc:"",id:null},notes:[]}},created:function(){var e=this;d.a.get("".concat(L,"/api/auth"),{headers:{authorization:"Bearer ".concat(localStorage.token)}}).then(function(t){t.data?(e.user=t.data,e.note.id=t.data.user._id):(localStorage.removeItem("token"),e.$router.push("/login"))}).catch(function(e){console.log("user error:",e)}),this.getNotes()},methods:{addNote:function(){var e=this,t={userID:this.note.id,title:this.note.title,description:this.note.desc};d.a.post("".concat(L,"/api/v1/notes"),t,{headers:{authorization:"Bearer ".concat(localStorage.token)}}).then(function(t){console.log(t.data),e.notes.push(t.data),e.newNote={title:"",desc:""}}).catch(function(e){console.log("err created:",e)})},getNotes:function(){var e=this;d.a.get("".concat(L,"/api/v1/notes"),{headers:{authorization:"Bearer ".concat(localStorage.token)}}).then(function(t){e.notes=t.data})}}},j=q,S=(r("8b71"),Object(w["a"])(j,k,y,!1,null,null,null)),E=S.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"mt-2"},[r("b-row",[r("b-col",[r("div",{staticClass:"form-flex"},[r("h3",{staticClass:"mb-3"},[e._v("Login")]),r("b-form",{staticClass:"border p-3 form-width"},[e.errorMessage?r("b-alert",{attrs:{variant:"danger",show:""}},[e._v(e._s(e.errorMessage))]):e._e(),r("b-form-group",{attrs:{label:"Email"}},[r("b-form-input",{class:{"is-invalid":e.submitted&&e.$v.email.$error},attrs:{type:"email",required:"",placeholder:"Your email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e.submitted&&!e.$v.email.email?r("b-form-text",{attrs:{"text-variant":"danger"}},[e._v("Must be a valid email")]):e._e(),e.submitted&&!e.$v.email.required?r("b-form-text",{attrs:{"text-variant":"danger"}},[e._v("Field is required")]):e._e()],1),r("b-form-group",{attrs:{label:"Password"}},[r("b-form-input",{class:{"is-invalid":e.submitted&&e.$v.password.$error},attrs:{type:"password",required:"",placeholder:"Your password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.submitted&&!e.$v.password.required?r("b-form-text",{attrs:{"text-variant":"danger"}},[e._v("Field is required")]):e._e(),e.submitted&&!e.$v.password.minLength?r("b-form-text",{attrs:{"text-variant":"danger"}},[e._v("Password needs to be at least 8 characters long")]):e._e()],1),r("b-form-group",[r("b-button",{attrs:{block:"",variant:"success"},on:{click:function(t){return e.login()}}},[e._v("Login")])],1)],1)],1)])],1)],1)},C=[],P=r("b5ae"),M="https://vueauthapp.herokuapp.com",N={name:"Login",data:function(){return{errorMessage:"",email:"",password:"",submitted:!1}},validations:{email:{required:P["required"],email:P["email"]},password:{required:P["required"],minLength:Object(P["minLength"])(8)}},methods:{login:function(){this.submitted=!0,this.$v.$touch(),this.$v.$invalid||(this.isLoading=!0,this.submitData())},submitData:function(){var e=this,t={email:this.email,password:this.password};d.a.post("".concat(M,"/api/auth/login"),t).then(function(t){t.data&&(localStorage.token=t.data.token,e.$router.push("/homepage"))}).catch(function(t){t&&(e.errorMessage="Unable to login")})}}},D=N,A=(r("9e91"),Object(w["a"])(D,O,C,!1,null,"7c9978eb",null)),F=A.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"mt-2 container-height"},[r("b-row",{staticClass:"row-height"},[r("b-col",[e.isLoading?r("div",{staticClass:"d-flex justify-content-center align-item-center spinner-height"},[r("b-spinner",{staticStyle:{width:"4rem",height:"4rem"},attrs:{variant:"primary",label:"Loading..."}})],1):e._e(),r("div",{staticClass:"form-flex"},[r("h3",{staticClass:"mb-3"},[e._v("Register to Manage Notes")]),r("b-form",{staticClass:"border p-3 form-width"},[e.dataError?r("b-alert",{attrs:{variant:"danger",show:""}},[e._v(e._s(e.dataError))]):e._e(),r("b-form-group",{attrs:{label:"Username"}},[r("b-form-input",{class:{"is-invalid":e.submitted&&e.$v.username.$error},attrs:{placeholder:"Enter name"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e.submitted&&!e.$v.username.required?r("b-form-text",{attrs:{"text-variant":"danger"}},[e._v("Field is required")]):e._e(),e.submitted&&!e.$v.username.minLength?r("b-form-text",{attrs:{"text-variant":"danger"}},[e._v("Must be 4 characters long")]):e._e()],1),r("b-form-group",{attrs:{label:"Email"}},[r("b-form-input",{class:{"is-invalid":e.submitted&&e.$v.email.$error},attrs:{type:"email",required:"",placeholder:"Your email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e.submitted&&!e.$v.email.email?r("b-form-text",{attrs:{"text-variant":"danger"}},[e._v("Must be a valid email")]):e._e(),e.submitted&&!e.$v.email.required?r("b-form-text",{attrs:{"text-variant":"danger"}},[e._v("Field is required")]):e._e()],1),r("b-form-group",{attrs:{label:"Password"}},[r("b-form-input",{class:{"is-invalid":e.submitted&&e.$v.password.$error},attrs:{type:"password",required:"",placeholder:"Your password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.submitted&&!e.$v.password.required?r("b-form-text",{attrs:{"text-variant":"danger"}},[e._v("Field is required")]):e._e(),e.submitted&&!e.$v.password.minLength?r("b-form-text",{attrs:{"text-variant":"danger"}},[e._v("Password needs to be at least 8 characters long")]):e._e()],1),r("b-form-group",[r("b-button",{attrs:{block:"",variant:"success"},on:{click:function(t){return e.registerUser()}}},[e._v("Register")])],1)],1)],1)])],1)],1)},U=[];a["default"].use(h["a"],d.a);var I=new h["a"].Store({state:{user:null,isLoggedin:!1,notes:{title:"",desc:""}},mutations:{},actions:{}}),R=r("5118"),Y="https://vueauthapp.herokuapp.com",z={name:"Register",data:function(){return{dataError:"",submitted:!1,username:"",email:"",password:"",isLoading:!1}},validations:{username:{required:P["required"],minLength:Object(P["minLength"])(4)},email:{required:P["required"],email:P["email"]},password:{required:P["required"],minLength:Object(P["minLength"])(8)}},methods:{registerUser:function(){this.submitted=!0,this.$v.$touch(),this.$v.$invalid||this.submitData()},submitData:function(){var e=this,t={username:this.username,email:this.email,password:this.password};this.isLoading=!0,d.a.post("".concat(Y,"/api/auth"),t).then(function(t){t&&(e.isLoading=!1,localStorage.token=t.data.token,e.$router.push("/homepage"))}).catch(function(t){t&&(e.isLoading=!1,e.dataError="User already exist",Object(R["setInterval"])(function(){e.dataError=""},4e3))})}}},B=z,J=(r("1e73"),Object(w["a"])(B,T,U,!1,null,"8e578cce",null)),W=J.exports;a["default"].use($["a"]);var H=new $["a"]({mode:"history",base:"/",routes:[{path:"/",name:"register",component:W,beforeEnter:function(e,t,r){localStorage.token?r("/homepage"):r()}},{path:"/login",name:"login",component:F,beforeEnter:function(e,t,r){localStorage.token?r("/homepage"):r()}},{path:"/homepage",name:"homepage",component:E,beforeEnter:function(e,t,r){localStorage.token?r():r("/login")}}]}),G=r("1dce"),K=r.n(G);a["default"].use(K.a),a["default"].config.productionTip=!1,new a["default"]({router:H,store:I,render:function(e){return e(x)}}).$mount("#app")},"64a9":function(e,t,r){},"7d55":function(e,t,r){},"8b71":function(e,t,r){"use strict";var a=r("e3a2"),n=r.n(a);n.a},"9e91":function(e,t,r){"use strict";var a=r("7d55"),n=r.n(a);n.a},e3a2:function(e,t,r){}});
//# sourceMappingURL=app.d80fc8dc.js.map